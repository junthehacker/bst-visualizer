"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function doCollide(a,b){var c=a.offset().top,d=a.offset().left,e=b.offset().top,f=b.offset().left;return!(c+a.height()<e||c>e+b.height()||d+a.width()<f||d>f+b.width())}function updateBstVisual(){function l(a){var b=tree.nodes(f).reverse(),c=tree.links(b);b.forEach(function(a){a.y=50*a.depth*graph_scale});var i=h.selectAll("g.node").data(b,function(a){return a.id||(a.id=++d)}),j=i.enter().append("g").attr("class","node").attr("transform",function(b){return"translate("+a.x0+","+a.y0+")"}).on("click",m);j.append("circle").attr("r",0).style("fill",function(a){return a._children?"lightsteelblue":"#fff"}).style("fill-opacity",function(a){return"null"===a.name?0:.5}),j.append("text").attr("x",function(a){return a.children||a._children?-30:0}).attr("font-size",function(a){return"null"===a.name?0:15*graph_scale}).attr("text-anchor",function(a){return a.children||a._children?"end":"start"}).text(function(a){return a.name}).style("fill","white").style("opacity",function(a){return"null"===a.name?.5:1});var k=i.transition().duration(e).attr("transform",function(a){return"translate("+a.x+","+a.y+")"});k.select("circle").attr("r",5*graph_scale).style("fill",function(a){return a._children?"lightsteelblue":"#fff"}),k.select("text").style("fill-opacity",1);var l=i.exit().transition().duration(e).attr("transform",function(b){return"translate("+a.x+","+a.y+")"}).remove();l.select("circle").attr("r",1e-6),l.select("text").style("fill-opacity",1e-6);var n=h.selectAll("path.link").data(c,function(a){return a.target.id});n.enter().insert("path","g").attr("class","link").style("stroke-opacity",function(a){return"null"===a.target.name?.1:.5}).attr("d",function(b){var c={x:a.x0,y:a.y0};return g({source:c,target:c})}),n.transition().duration(e).attr("d",g),n.exit().transition().duration(e).attr("d",function(b){var c={x:a.x,y:a.y};return g({source:c,target:c})}).remove(),b.forEach(function(a){a.x0=a.x,a.y0=a.y})}function m(a){a.children?(a._children=a.children,a.children=null):(a.children=a._children,a._children=null),l(a)}var f,a={top:20,right:120,bottom:20,left:120},c=(3*$(window).width(),$(window).height()),d=0,e=1;tree=d3.layout.tree();var g=d3.svg.diagonal().projection(function(a){return[a.x,a.y]}),h=d3.select("#bst-container").append("svg").append("g").attr("transform","translate("+a.left+","+a.top+")");f=bst._json_data,f.x0=$(window).width()/2,f.y0=0;var i=[1],j=function a(b,c){c.children&&c.children.length>0&&(i.length<=b+1&&i.push(0),i[b+1]+=c.children.length,c.children.forEach(function(c){a(b+1,c)}))};j(0,f);var k=50*d3.max(i)*graph_scale;tree.size([k,c]),l(f),d3.select(self.frameElement).style("height","500px")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),BinarySearchTree=function(){function a(){_classCallCheck(this,a),this._root=null,this._min_left=0,this._json_data={},this._traverse_result=[]}return _createClass(a,[{key:"inOrderTraverse",value:function(b){b&&(null!==b.left&&this.inOrderTraverse(b.left),this._traverse_result[this._traverse_result.length]=b,null!==b.right&&this.inOrderTraverse(b.right))}},{key:"preOrderTraverse",value:function(b){b&&(this._traverse_result[this._traverse_result.length]=b,null!==b.left&&this.preOrderTraverse(b.left),null!==b.right&&this.preOrderTraverse(b.right))}},{key:"postOrderTraverse",value:function(b){b&&(null!==b.left&&this.postOrderTraverse(b.left),null!==b.right&&this.postOrderTraverse(b.right),this._traverse_result[this._traverse_result.length]=b)}},{key:"insert",value:function(b){var c={value:b,left:null,right:null},d=this._root,e=this._json_data;if(null==this._root)this._root=c,this._json_data={name:c.value,children:[{name:"null"},{name:"null"}]};else for(;;)if(console.log(e),b<d.value){if(null===d.left){d.left=c,e.children[0]={name:c.value,children:[{name:"null"},{name:"null"}]};break}d=d.left,e=e.children[0]}else{if(!(b>d.value))break;if(null===d.right){d.right=c,e.children[1]={name:c.value,children:[{name:"null"},{name:"null"}]};break}d=d.right,e=e.children[1]}}}]),a}(),tree,bst=new BinarySearchTree,graph_scale=1;$(function(){function a(){for(var a="",b=0;b<bst._traverse_result.length;b++)a+=" "+bst._traverse_result[b].value;alert(a)}$("#insert-button").click(function(){$("#bst-container").html("");var a=$("#seperate-by-textbox").val(),b=$("#insert-textbox").val().split(a);graph_scale=$("#scale-by-textbox").val(),bst._root=null,bst._json_data=null;for(var c=0;c<b.length;c++)bst.insert(b[c]);updateBstVisual()}),$("#insert-textbox").on("change  keyup paste",function(){$("#insert-button").click()}),$("#seperate-by-textbox").on("change  keyup paste",function(){$("#seperate-by-indicator").text($(this).val()),$("#insert-button").click()}),$("#scale-by-textbox").on("change  keyup paste",function(){$("#insert-button").click()}),$("#in-order-traversal-button").click(function(){bst._traverse_result=[],bst.inOrderTraverse(bst._root),a()}),$("#pre-order-traversal-button").click(function(){bst._traverse_result=[],bst.preOrderTraverse(bst._root),a()}),$("#post-order-traversal-button").click(function(){bst._traverse_result=[],bst.postOrderTraverse(bst._root),a()}),$("#insert-button").click(),$("#toggle-button").click(function(){$("#status-panel").hasClass("show")?($("#status-panel").removeClass("show"),$("#status-panel i").removeClass("fa-chevron-right"),$("#status-panel i").addClass("fa-chevron-left")):($("#status-panel").addClass("show"),$("#status-panel i").removeClass("fa-chevron-left"),$("#status-panel i").addClass("fa-chevron-right"))}),setInterval(function(){$("svg").first().css({height:$("g")[0].getBoundingClientRect().height+200}),$("svg").first().css({width:$("g")[0].getBoundingClientRect().width+1e3})},10)});